<!DOCTYPE html>
<html ng-app="horchata">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Socket IO</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

    <!--Socket IO -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.5/angular.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <script src="/script.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="row justify-content-md-center">
        <div class="col-sm-12">
          <div ng-controller="ChatController as chat">
            <div class="tc">
              <svg style="width: 2em;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 187.15 292" class="w5"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#e5c71c;}.cls-3{fill:#f7df1e;}.cls-4{fill:#050a07;}</style></defs><title>Untitled-1</title><path class="cls-1" d="M76.84,69.66,85.28,163h.1s16,5,32.52,5c16.17,0,45.86-23.45,62-23.45,13.59,0,31.6,6.65,31.6,6.65l.11,0,8.15-81.6Z" transform="translate(-56.43 -4)"></path><polygon class="cls-2" points="38.76 268.56 38.76 268.56 143.1 268.56 143.9 260.53 38.03 260.51 38.76 268.56"></polygon><path class="cls-3" d="M179.93,144.57c-16.18,0-45.87,23.45-62,23.45-16.57,0-32.52-5-32.52-5h-.1l9.17,101.49,105.88,0,11.32-113.28-.11,0S193.52,144.57,179.93,144.57Z" transform="translate(-56.43 -4)"></path><path class="cls-4" d="M130.16,188.1h10.11l0,36.3a16.84,16.84,0,0,1-1.42,6.82,16.22,16.22,0,0,1-3.8,5.31,17.1,17.1,0,0,1-5.67,3.45,19.75,19.75,0,0,1-7,1.22,24.19,24.19,0,0,1-7.2-1,15.44,15.44,0,0,1-5.56-3,13.55,13.55,0,0,1-3.62-5,18.29,18.29,0,0,1-1.33-7.09h10.15q0,4.21,1.87,6.1t5.68,1.89a7.44,7.44,0,0,0,3.17-.67A7.25,7.25,0,0,0,128,230.6a8.26,8.26,0,0,0,1.56-2.75,10.38,10.38,0,0,0,.56-3.44Z" transform="translate(-56.43 -4)"></path><path class="cls-4" d="M176.86,226.82a7.05,7.05,0,0,0-.49-2.63,6.21,6.21,0,0,0-1.66-2.28,12.2,12.2,0,0,0-3.06-1.94,29.33,29.33,0,0,0-4.7-1.64,44.09,44.09,0,0,1-6.53-2.34,23.76,23.76,0,0,1-5.49-3.38,15.64,15.64,0,0,1-3.8-4.61,12.49,12.49,0,0,1-1.42-6,12.82,12.82,0,0,1,1.4-6,13.76,13.76,0,0,1,3.89-4.61,18.18,18.18,0,0,1,5.86-2.93,25.17,25.17,0,0,1,7.34-1,22.64,22.64,0,0,1,7.5,1.19,17.56,17.56,0,0,1,5.85,3.33,15,15,0,0,1,5.18,11.57h-9.86a10.3,10.3,0,0,0-.63-3.24,6.86,6.86,0,0,0-1.66-2.54,7.6,7.6,0,0,0-2.73-1.65,11.24,11.24,0,0,0-3.83-.59,12.08,12.08,0,0,0-3.58.49,7.77,7.77,0,0,0-2.64,1.37,5.86,5.86,0,0,0-1.64,2.09,6.14,6.14,0,0,0-.56,2.61,4.94,4.94,0,0,0,.74,2.66,7.26,7.26,0,0,0,2.14,2.14,17.57,17.57,0,0,0,3.4,1.74,42.39,42.39,0,0,0,4.52,1.48,39.24,39.24,0,0,1,6.62,2.55,21.34,21.34,0,0,1,5.2,3.58,15.1,15.1,0,0,1,3.38,4.71,14,14,0,0,1,1.21,5.88,12.87,12.87,0,0,1-5.22,10.67,17.34,17.34,0,0,1-5.83,2.81,27.12,27.12,0,0,1-7.38,1,27.59,27.59,0,0,1-4.95-.45,22.94,22.94,0,0,1-4.71-1.39,20.76,20.76,0,0,1-4.19-2.34,15.86,15.86,0,0,1-3.36-3.27,14.89,14.89,0,0,1-2.23-4.25,16.2,16.2,0,0,1-.81-5.25h9.93a10.73,10.73,0,0,0,.83,4.07,7.29,7.29,0,0,0,2.1,2.77,8.71,8.71,0,0,0,3.24,1.58,16.08,16.08,0,0,0,4.16.5,12.49,12.49,0,0,0,3.58-.47,8.13,8.13,0,0,0,2.64-1.29,5.63,5.63,0,0,0,1.66-2A5.74,5.74,0,0,0,176.86,226.82Z" transform="translate(-56.43 -4)"></path><path class="cls-4" d="M241.82,22.32,243.57,5,180.42,4h-.07L176,46.22H56.43L80.08,296H215.62L239.24,46.22H193.4l2.52-24.68Zm-22,47.34-20.27,202.9H95.18l-.73-8.05h0L85.28,163h0L76.84,69.66h96.8l-8,78.61c5.34-2.22,10.26-3.7,14.32-3.7,1.11,0,2.25,0,3.41.13l7.66-75Z" transform="translate(-56.43 -4)"></path></svg>
              <h1>Horchata Chat</h1>
            </div>
            <div ng-if="!chat.user">
              <form ng-submit="chat.setUser()">
                <div class="row">
                  <div class="col-sm-12">
                    <div class="alert alert-danger" role="alert" ng-if="chat.userExists">
                      <strong>Holy molly!</strong> The nickname is taken
                    </div>
                    <div class="input-group">
                      <input class="form-control" placeholder="Enter a nickname..." ng-model="chat.nickname" required/>
                      <span class="input-group-btn">
                        <button class="btn btn-primary" type="submit">Let's Go!</button>
                      </span>
                    </div>
                  </div>
                </div>
              </form>
            </div>
            <div ng-if="chat.user" class="row">
              <div class="col-sm-4">
                <ul class="list-group">
                  <li class="list-group-item active">{{chat.users.length}} Active Users</li>
                  <li class="list-group-item" ng-repeat="user in chat.users">
                    <span ng-if="user.nickname === chat.user.nickname">{{user.nickname}}</span>
                    <a href="#" ng-click="chat.private(user)" ng-if="user.nickname !== chat.user.nickname">{{user.nickname}}</a>
                  </li>
                </ul>
              </div>
              <div class="col-sm-8">
                <ul class="list-group">
                  <li class="list-group-item" ng-repeat="message in chat.messages">
                    <span ng-if="message.user">
                      {{message.time}} - {{ message.user.nickname}}: {{message.text}}
                    </span>
                    <span ng-if="!message.user" class="text-muted">
                      {{message.time}} - {{message.text}}
                    </span>
                  </li>
                </ul>
                <form ng-submit="chat.sendMessage()">
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="input-group">
                        <input class="form-control" placeholder="Enter a message..." ng-model="chat.message" required/>
                        <span class="input-group-btn">
                          <button class="btn btn-primary" type="submit">Send</button>
                        </span>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
